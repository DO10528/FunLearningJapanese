<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>お金の学習 - FunLearnJP</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@500;700;900&display=swap" rel="stylesheet">

<link rel="stylesheet" href="css/money.css">

<link rel="stylesheet" href="css/common_ui.css">
</head>
<body>

<header>
    <a href="index.html" class="logo"><i class="fa-solid fa-coins"></i> お金の学習</a>
    <a href="index.html" class="home-link"><i class="fa-solid fa-house"></i> ホーム</a>
</header>

<div class="container">
    <div id="auth-status" style="font-size:0.8em; color:#666; margin-bottom:5px;">認証中...</div>

    <div id="practice-screen" class="screen active">
        <h2 style="color:var(--primary); margin:10px 0;"><i class="fa-solid fa-book-open"></i> おかねの れんしゅう</h2>
        <p style="margin:0 0 10px;">おかねを タッチして おぼえよう！</p>
        
        <div class="practice-grid" id="practice-list">
            </div>

        <div class="start-btn-area">
            <button class="big-start-btn" onclick="showMenu()">
                <i class="fa-solid fa-gamepad"></i> ゲームをはじめる
            </button>
        </div>
    </div>

    <div id="menu-screen" class="screen">
        <button class="btn-return-fixed" onclick="showScreen('practice-screen')">
            <i class="fa-solid fa-arrow-left"></i> れんしゅう
        </button>
        
        <h2 style="color:var(--primary); margin-top:30px;">ゲームを えらんでね</h2>
        <div class="menu-grid" style="margin-top:10px;">
            <div class="game-btn" onclick="startLevel(1)">
                <i class="fa-solid fa-hand-holding-dollar fa-2x" style="color:var(--primary);"></i>
                <h3>Level 1</h3>
                <p>おかねを はらおう<br>(ドラッグ)</p>
            </div>
            <div class="game-btn" onclick="startLevel(2)">
                <i class="fa-solid fa-cash-register fa-2x" style="color:#2196f3;"></i>
                <h3>Level 2</h3>
                <p>いくらですか？<br>(ききとり)</p>
            </div>
            <div class="game-btn" onclick="startLevel(3)">
                <i class="fa-solid fa-calculator fa-2x" style="color:#9c27b0;"></i>
                <h3>Level 3</h3>
                <p>おつりは いくら？<br>(けいさん)</p>
            </div>
        </div>
    </div>

    <div id="level1-screen" class="screen">
        <button class="btn-return-fixed" onclick="showMenu()">
            <i class="fa-solid fa-arrow-left"></i> ゲームせんたく
        </button>

        <div class="target-display" id="lv1-target">0円</div>
        <button onclick="speakPrice(currentLv1Target)" style="margin-bottom:5px; border:none; background:#e3f2fd; color:#2196f3; padding:5px 15px; border-radius:20px;">
            <i class="fa-solid fa-volume-high"></i> もういちど
        </button>

        <div class="tray-area" id="tray-area">
            <div style="position:absolute; color:#ccc; font-weight:bold;">ここにおかねをおく</div>
        </div>
        
        <div style="width:100%; text-align:center; margin-bottom:5px; font-weight:bold;">いま: <span id="current-sum">0</span>円</div>
        <button onclick="checkLv1()" style="background:var(--primary); color:white; padding:10px 30px; border:none; border-radius:20px; font-size:1.2em; font-weight:bold; margin-bottom:10px;">これではらう</button>

        <div class="wallet-area" id="wallet-area"></div>
    </div>

    <div id="level2-screen" class="screen">
        <button class="btn-return-fixed" onclick="showMenu()">
            <i class="fa-solid fa-arrow-left"></i> ゲームせんたく
        </button>

        <div class="quiz-card">
            <div class="product-img"><i class="fa-solid fa-apple-whole"></i></div>
            <button onclick="speakPrice(currentLv2Target)" style="border:none; background:#e3f2fd; color:#2196f3; padding:8px 20px; border-radius:20px; font-size:1.1em;">
                <i class="fa-solid fa-volume-high"></i> きく
            </button>
            
            <div style="display:flex; align-items:center; justify-content:center;">
                <div id="lv2-input-display" class="input-money">0</div>
                <div style="font-size:1.5em; margin-left:5px;">円</div>
            </div>

            <div class="numpad">
                <button class="num-btn" onclick="addNum(7)">7</button>
                <button class="num-btn" onclick="addNum(8)">8</button>
                <button class="num-btn" onclick="addNum(9)">9</button>
                <button class="num-btn" onclick="addNum(4)">4</button>
                <button class="num-btn" onclick="addNum(5)">5</button>
                <button class="num-btn" onclick="addNum(6)">6</button>
                <button class="num-btn" onclick="addNum(1)">1</button>
                <button class="num-btn" onclick="addNum(2)">2</button>
                <button class="num-btn" onclick="addNum(3)">3</button>
                <button class="num-btn" onclick="addNum(0)">0</button>
                <button class="num-btn" onclick="clearNum()" style="color:white; background:#ef5350;">C</button>
                <button class="num-btn" onclick="checkLv2()" style="background:var(--primary); color:white;">OK</button>
            </div>
        </div>
    </div>

    <div id="level3-screen" class="screen">
        <button class="btn-return-fixed" onclick="showMenu()">
            <i class="fa-solid fa-arrow-left"></i> ゲームせんたく
        </button>

        <div class="quiz-card">
            <div style="font-size:1.1em; margin-bottom:5px; font-weight:bold; color:var(--primary);">おつりは いくら？</div>
            <div style="display:flex; justify-content:space-around; align-items:center; margin-bottom:15px; width:100%;">
                <div style="text-align:center;">
                    <div style="font-size:1.8em; color:#e91e63;"><i class="fa-solid fa-tag"></i></div>
                    <div style="font-weight:bold;" id="lv3-price">350円</div>
                </div>
                <div style="font-size:1.1em; color:#999;">を</div>
                <div style="text-align:center;">
                    <div style="font-size:1.8em; color:#4caf50;"><i class="fa-solid fa-money-bill-wave"></i></div>
                    <div style="font-weight:bold;" id="lv3-paid">500円</div>
                </div>
                <div style="font-size:1.1em; color:#999;">ではらう</div>
            </div>

            <div style="display:flex; align-items:center; justify-content:center;">
                <div id="lv3-input-display" class="input-money">0</div>
                <div style="font-size:1.5em; margin-left:5px;">円</div>
            </div>

            <div class="numpad">
                <button class="num-btn" onclick="addNum(7)">7</button>
                <button class="num-btn" onclick="addNum(8)">8</button>
                <button class="num-btn" onclick="addNum(9)">9</button>
                <button class="num-btn" onclick="addNum(4)">4</button>
                <button class="num-btn" onclick="addNum(5)">5</button>
                <button class="num-btn" onclick="addNum(6)">6</button>
                <button class="num-btn" onclick="addNum(1)">1</button>
                <button class="num-btn" onclick="addNum(2)">2</button>
                <button class="num-btn" onclick="addNum(3)">3</button>
                <button class="num-btn" onclick="addNum(0)">0</button>
                <button class="num-btn" onclick="clearNum()" style="color:white; background:#ef5350;">C</button>
                <button class="num-btn" onclick="checkLv3()" style="background:var(--primary); color:white;">OK</button>
            </div>
        </div>
    </div>
</div>

<div id="modal" class="modal-overlay">
    <div class="modal-box">
        <div id="modal-icon" style="font-size:4em; margin-bottom:10px;"></div>
        <h2 id="modal-msg" style="margin:5px 0;"></h2>
        <div id="modal-sub" style="color:#666; margin-bottom:15px;"></div>
        <button onclick="closeModal()" style="background:var(--primary); color:white; border:none; padding:10px 30px; border-radius:20px; font-size:1.1em;">つぎへ</button>
    </div>
</div>

<script type="module" src="js/firebase-config.js"></script>

<script src="js/money.js"></script>

<script src="js/common_ui.js"></script>
</body>
</html>