<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>て形タイピング - FunLearnJP</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@500;700;900&family=Klee+One:wght@600&display=swap" rel="stylesheet">

<style>
    /* 共通スタイルは「ます形」と同じ */
    :root {
        --primary: #ff9800; /* て形のテーマカラー（オレンジに変更して差別化） */
        --bg-color: #fff3e0;
        --text-color: #333;
        --grp1-color: #f48fb1;
        --grp2-color: #80deea;
        --grp3-color: #9575cd;
    }

    body {
        font-family: 'Zen Maru Gothic', sans-serif;
        background-color: var(--bg-color);
        color: var(--text-color);
        margin: 0; padding: 0; min-height: 100vh;
        display: flex; flex-direction: column; align-items: center;
    }

    header {
        width: 100%; background: #FFF; border-bottom: 3px solid var(--primary);
        padding: 10px 20px; display: flex; justify-content: space-between; align-items: center;
    }
    .logo { font-size: 1.2em; font-weight: 900; color: var(--primary); text-decoration: none; }
    .home-icon { color: var(--primary); font-size: 1.5em; }

    .container { width: 100%; max-width: 600px; padding: 20px; text-align: center; flex-grow: 1; }

    #menu-screen { animation: fadeIn 0.5s; }
    .title { font-size: 1.8em; color: var(--primary); margin-bottom: 10px; }
    .desc { color: #666; margin-bottom: 30px; }

    .group-btn {
        display: block; width: 100%; max-width: 300px; margin: 15px auto;
        padding: 20px; border-radius: 20px; border: none;
        color: white; font-size: 1.3em; font-weight: 900; cursor: pointer;
        box-shadow: 0 5px 0 rgba(0,0,0,0.1); transition: transform 0.1s;
    }
    .group-btn:active { transform: translateY(4px); box-shadow: none; }
    
    .btn-g1 { background: var(--grp1-color); }
    .btn-g2 { background: var(--grp2-color); }
    .btn-g3 { background: var(--grp3-color); }

    #game-screen { display: none; width: 100%; }
    
    .question-card {
        background: white; border-radius: 20px; padding: 40px 20px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.1); margin-bottom: 30px;
        border: 4px solid var(--primary);
    }
    .q-word { font-size: 2.2em; font-weight: bold; color: #555; margin-bottom: 10px; font-family: 'Klee One', cursive;}
    .q-sub { font-size: 1em; color: #999; }

    .input-area { position: relative; width: 100%; max-width: 300px; margin: 0 auto; }
    input[type="text"] {
        width: 100%; padding: 15px; font-size: 1.5em; text-align: center;
        border: 3px solid #ccc; border-radius: 15px; outline: none;
        font-family: 'Klee One', cursive;
    }
    input[type="text"]:focus { border-color: var(--primary); background: #fffde7; }

    .feedback-msg { height: 30px; margin-top: 10px; font-weight: bold; font-size: 1.2em; }

    .progress-container {
        width: 100%; height: 10px; background: #ddd; border-radius: 5px; margin-bottom: 20px; overflow: hidden;
    }
    .progress-bar { height: 100%; background: var(--primary); width: 0%; transition: width 0.3s; }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .shake { animation: shake 0.4s; border-color: #ff5252 !important; background: #ffebee !important; }
    @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } }

    .submit-btn {
        margin-top: 20px; background: var(--primary); color: white; border: none;
        padding: 12px 40px; border-radius: 50px; font-size: 1.2em; font-weight: bold;
        cursor: pointer; box-shadow: 0 4px 0 #ef6c00;
    }
    .submit-btn:active { transform: translateY(3px); box-shadow: none; }

</style>
</head>
<body>

<header>
    <a href="index.html" class="logo"><i class="fa-solid fa-keyboard"></i> FunLearnJP</a>
    <a href="index.html" class="home-icon"><i class="fa-solid fa-house"></i></a>
</header>

<div class="container">

    <div id="menu-screen">
        <h1 class="title">て形 タイピング</h1>
        <p class="desc">ます形 → て形 にかえよう！<br>(例: かきます → かいて)</p>
        
        <button class="group-btn btn-g1" onclick="startGame('grp1')">Group I</button>
        <button class="group-btn btn-g2" onclick="startGame('grp2')">Group II</button>
        <button class="group-btn btn-g3" onclick="startGame('grp3')">Group III</button>
        
        <a href="verb_list.html" style="display:block; margin-top:30px; color:#999; text-decoration:none;">リストにもどる</a>
    </div>

    <div id="game-screen">
        <div class="progress-container"><div id="progress-bar" class="progress-bar"></div></div>
        
        <div class="question-card" id="q-card">
            <div id="q-text" class="q-word">たべます</div>
            <div class="q-sub">「て形」 にしてね</div>
        </div>

        <div class="input-area">
            <input type="text" id="answer-input" placeholder="ここに入力" autocomplete="off">
            <div id="feedback" class="feedback-msg"></div>
        </div>

        <button class="submit-btn" onclick="checkAnswer()">決定 (Enter)</button>
        
        <button onclick="location.reload()" style="margin-top:20px; background:none; border:none; color:#999; cursor:pointer;">やめる</button>
    </div>

</div>

<audio id="snd-correct" src="assets/sounds/seikai.mp3"></audio>
<audio id="snd-incorrect" src="assets/sounds/bubu.mp3"></audio>

<script>
    // データセット（ます形 -> て形）
    const verbData = {
        grp1: [
            { masu: "かきます", te: "かいて" }, { masu: "ききます", te: "きいて" },
            { masu: "いきます", te: "いって" }, { masu: "およぎます", te: "およいで" },
            { masu: "のみます", te: "のんで" }, { masu: "よみます", te: "よんで" },
            { masu: "あそびます", te: "あそんで" }, { masu: "かいます", te: "かって" },
            { masu: "あいます", te: "あって" }, { masu: "まちます", te: "まって" },
            { masu: "もちます", te: "もって" }, { masu: "かえります", te: "かえって" },
            { masu: "はなします", te: "はなして" }
        ],
        grp2: [
            { masu: "たべます", te: "たべて" }, { masu: "ねます", te: "ねて" },
            { masu: "あげます", te: "あげて" }, { masu: "あけます", te: "あけて" },
            { masu: "みます", te: "みて" }, { masu: "おきます", te: "おきて" },
            { masu: "かります", te: "かりて" }, { masu: "できます", te: "できて" }
        ],
        grp3: [
            { masu: "べんきょうします", te: "べんきょうして" }, { masu: "かいものします", te: "かいものして" },
            { masu: "さんぽします", te: "さんぽして" }, { masu: "きます", te: "きて" },
            { masu: "もってきます", te: "もってきて" }
        ]
    };

    let currentQueue = [];
    let currentQ = null;
    let totalQ = 0;
    
    const menuScreen = document.getElementById('menu-screen');
    const gameScreen = document.getElementById('game-screen');
    const qText = document.getElementById('q-text');
    const input = document.getElementById('answer-input');
    const feedback = document.getElementById('feedback');
    const progressBar = document.getElementById('progress-bar');
    const qCard = document.getElementById('q-card');

    const sndCorrect = document.getElementById('snd-correct');
    const sndIncorrect = document.getElementById('snd-incorrect');

    function startGame(group) {
        let color = '#ff9800';
        if(group === 'grp1') color = '#f48fb1';
        if(group === 'grp2') color = '#80deea';
        if(group === 'grp3') color = '#9575cd';
        qCard.style.borderColor = color;

        currentQueue = [...verbData[group]];
        currentQueue.sort(() => Math.random() - 0.5);
        totalQ = currentQueue.length;
        
        menuScreen.style.display = 'none';
        gameScreen.style.display = 'block';
        
        nextQuestion();
    }

    function nextQuestion() {
        if (currentQueue.length === 0) {
            alert("クリア！おめでとう！");
            location.reload();
            return;
        }

        currentQ = currentQueue.pop();
        qText.textContent = currentQ.masu;
        input.value = "";
        input.focus();
        feedback.textContent = "";
        
        const percent = ((totalQ - currentQueue.length - 1) / totalQ) * 100;
        progressBar.style.width = percent + '%';
    }

    function checkAnswer() {
        const userVal = input.value.trim();
        
        if (userVal === currentQ.te) {
            sndCorrect.currentTime = 0;
            sndCorrect.play();
            feedback.style.color = "green";
            feedback.textContent = "せいかい！";
            setTimeout(nextQuestion, 800);
        } else {
            sndIncorrect.currentTime = 0;
            sndIncorrect.play();
            input.classList.add('shake');
            feedback.style.color = "red";
            feedback.textContent = `こたえ: ${currentQ.te}`;
            setTimeout(() => input.classList.remove('shake'), 500);
        }
    }

    input.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') checkAnswer();
    });

</script>
</body>
</html>