<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ—¥æœ¬åœ°å›³ - FunLearnJP</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@500;700;900&display=swap" rel="stylesheet">

<style>
    :root {
        --bg-color: #f0f8ff;
        --map-fill: #ffffff;
        --map-stroke: #a0a0a0;
        --hover-color: #ffb74d;
        --text-color: #333;
        --glass-bg: rgba(255, 255, 255, 0.8);
    }

    body {
        font-family: 'Zen Maru Gothic', sans-serif;
        background-color: var(--bg-color);
        color: var(--text-color);
        margin: 0;
        height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        overflow: hidden;
    }

    header {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        padding: 15px;
        text-align: center;
        background: var(--glass-bg);
        backdrop-filter: blur(5px);
        box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        z-index: 10;
    }

    h1 { margin: 0; font-size: 1.5rem; color: #5c7aff; }

    /* ãƒãƒƒãƒ—è¡¨ç¤ºã‚¨ãƒªã‚¢ */
    #map-container {
        width: 95%;
        height: 85vh;
        margin-top: 60px;
        background: white;
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        padding: 20px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden; /* SVGãŒã¯ã¿å‡ºã•ãªã„ã‚ˆã†ã« */
    }

    /* SVGåœ°å›³ã®ã‚¹ã‚¿ã‚¤ãƒ«è¨­å®š */
    svg {
        width: 100%;
        height: 100%;
        filter: drop-shadow(0 5px 5px rgba(0,0,0,0.1));
    }

    /* éƒ½é“åºœçœŒï¼ˆãƒ‘ã‚¹ï¼‰ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    path {
        fill: var(--map-fill);
        stroke: var(--map-stroke);
        stroke-width: 0.5;
        cursor: pointer;
        transition: fill 0.2s, transform 0.2s;
        vector-effect: non-scaling-stroke; /* æ‹¡å¤§ã—ã¦ã‚‚ç·šãŒå¤ªããªã‚‰ãªã„ */
    }

    /* ãƒ›ãƒãƒ¼æ™‚ã®å‹•ã */
    path:hover {
        fill: var(--hover-color) !important;
        transform: translateY(-2px); /* å°‘ã—æµ®ãä¸ŠãŒã‚‹ */
        filter: drop-shadow(0 4px 6px rgba(0,0,0,0.2));
        z-index: 100; /* æ‰‹å‰ã«è¡¨ç¤º */
    }

    /* ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ï¼ˆçœŒåè¡¨ç¤ºï¼‰ */
    #tooltip {
        position: absolute;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 5px 12px;
        border-radius: 4px;
        font-size: 0.9rem;
        pointer-events: none; /* ãƒã‚¦ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç„¡è¦– */
        opacity: 0;
        transition: opacity 0.2s;
        z-index: 1000;
        white-space: nowrap;
    }

    /* èª­ã¿è¾¼ã¿ä¸­ã®è¡¨ç¤º */
    #loader {
        position: absolute;
        font-size: 1.2rem;
        color: #666;
    }

</style>
</head>
<body>

<header>
    <h1>ğŸ‡¯ğŸ‡µ æ—¥æœ¬åœ°å›³</h1>
</header>

<div id="map-container">
    <div id="loader">åœ°å›³ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>
    </div>

<div id="tooltip"></div>

<script>
    // å¤–éƒ¨ã®é«˜å“è³ªãªæ—¥æœ¬åœ°å›³SVGãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹URL
    // (JISã‚³ãƒ¼ãƒ‰æº–æ‹ ã®IDã‚’æŒã¤ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®åœ°å›³ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨)
    const MAP_URL = "https://raw.githubusercontent.com/d-kusk/wap_nippon/master/wap_nippon.svg";

    const container = document.getElementById('map-container');
    const tooltip = document.getElementById('tooltip');
    const loader = document.getElementById('loader');

    // ãƒãƒƒãƒ—ã®èª­ã¿è¾¼ã¿ã¨åˆæœŸåŒ–
    async function initMap() {
        try {
            const res = await fetch(MAP_URL);
            if (!res.ok) throw new Error("åœ°å›³ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ");
            
            const svgText = await res.text();
            loader.style.display = 'none';
            
            // SVGã‚’ã‚³ãƒ³ãƒ†ãƒŠã«æŒ¿å…¥
            // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ã®ãŸã‚ç°¡æ˜“çš„ãªãƒ‘ãƒ¼ã‚¹ã‚’è¡Œã†ã®ãŒç†æƒ³ã§ã™ãŒã€
            // ã“ã“ã§ã¯ä¿¡é ¼ã§ãã‚‹ã‚½ãƒ¼ã‚¹ã¨ã—ã¦innerHTMLã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = svgText;
            const svgElement = tempDiv.querySelector('svg');
            
            if (svgElement) {
                // SVGã®ã‚µã‚¤ã‚ºèª¿æ•´ï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œï¼‰
                svgElement.removeAttribute('width');
                svgElement.removeAttribute('height');
                svgElement.setAttribute('preserveAspectRatio', 'xMidYMid meet');
                container.appendChild(svgElement);
                
                setupInteractions(svgElement);
            }

        } catch (error) {
            loader.textContent = "ã‚¨ãƒ©ãƒ¼: åœ°å›³ã‚’è¡¨ç¤ºã§ãã¾ã›ã‚“ã§ã—ãŸã€‚";
            console.error(error);
        }
    }

    // ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã®è¨­å®š
    function setupInteractions(svg) {
        // SVGå†…ã®ã™ã¹ã¦ã®ãƒ‘ã‚¹ï¼ˆéƒ½é“åºœçœŒï¼‰ã‚’å–å¾—
        // wap_nippon.svg ã¯ <path> ã‚¿ã‚°ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™
        const paths = svg.querySelectorAll('path');

        paths.forEach(path => {
            // IDã‹ã‚‰çœŒåã‚’æ¨æ¸¬ã™ã‚‹ç°¡æ˜“ãƒãƒƒãƒ”ãƒ³ã‚° (ãƒ‡ãƒ¼ã‚¿è‡ªä½“ã«åå‰ãŒãªã„å ´åˆã®ãŸã‚)
            // å®Ÿéš›ã¯ dataå±æ€§ãªã©ã‚’æ´»ç”¨ã—ã¾ã™ãŒã€ã¾ãšã¯è¦–è¦šåŠ¹æœã‚’å„ªå…ˆ
            
            // ãƒã‚¦ã‚¹ã‚ªãƒ¼ãƒãƒ¼
            path.addEventListener('mouseenter', (e) => {
                // è‰²ã‚’å¤‰ãˆã‚‹ï¼ˆCSSã®hoverã§ã‚‚å¯¾å¿œã—ã¦ã„ã‚‹ãŒã€JSåˆ¶å¾¡ãŒå¿…è¦ãªå ´åˆã®ãŸã‚ã«è¨˜è¿°ï¼‰
                
                // ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—è¡¨ç¤º
                const prefName = getPrefectureNameById(path.id) || "éƒ½é“åºœçœŒ";
                tooltip.textContent = prefName;
                tooltip.style.opacity = '1';
                
                // SVGå†…ã§ã®é‡ãªã‚Šé †ã‚’ä¸€ç•ªä¸Šã«ã™ã‚‹ï¼ˆæ ç·šãŒç¶ºéº—ã«è¦‹ãˆã‚‹ã‚ˆã†ã«ï¼‰
                path.parentNode.appendChild(path);
            });

            // ãƒã‚¦ã‚¹ç§»å‹•ï¼ˆãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—è¿½å¾“ï¼‰
            path.addEventListener('mousemove', (e) => {
                const x = e.clientX;
                const y = e.clientY;
                tooltip.style.left = (x + 15) + 'px';
                tooltip.style.top = (y + 15) + 'px';
            });

            // ãƒã‚¦ã‚¹ãƒªãƒ¼ãƒ–
            path.addEventListener('mouseleave', () => {
                tooltip.style.opacity = '0';
            });

            // ã‚¯ãƒªãƒƒã‚¯
            path.addEventListener('click', (e) => {
                const prefName = getPrefectureNameById(path.id) || "ä¸æ˜";
                alert(`ã€Œ${prefName}ã€ã‚’é¸æŠã—ã¾ã—ãŸ`);
            });
        });
    }

    // SVGã®ID (jp-01, jp-13 ãªã©) ã‹ã‚‰çœŒåã‚’è¿”ã™ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
    function getPrefectureNameById(id) {
        if (!id) return null;
        const code = parseInt(id.replace('jp-', ''), 10);
        const prefs = [
            null, "åŒ—æµ·é“", "é’æ£®çœŒ", "å²©æ‰‹çœŒ", "å®®åŸçœŒ", "ç§‹ç”°çœŒ", "å±±å½¢çœŒ", "ç¦å³¶çœŒ",
            "èŒ¨åŸçœŒ", "æ ƒæœ¨çœŒ", "ç¾¤é¦¬çœŒ", "åŸ¼ç‰çœŒ", "åƒè‘‰çœŒ", "æ±äº¬éƒ½", "ç¥å¥ˆå·çœŒ",
            "æ–°æ½ŸçœŒ", "å¯Œå±±çœŒ", "çŸ³å·çœŒ", "ç¦äº•çœŒ", "å±±æ¢¨çœŒ", "é•·é‡çœŒ", "å²é˜œçœŒ",
            "é™å²¡çœŒ", "æ„›çŸ¥çœŒ", "ä¸‰é‡çœŒ", "æ»‹è³€çœŒ", "äº¬éƒ½åºœ", "å¤§é˜ªåºœ", "å…µåº«çœŒ",
            "å¥ˆè‰¯çœŒ", "å’Œæ­Œå±±çœŒ", "é³¥å–çœŒ", "å³¶æ ¹çœŒ", "å²¡å±±çœŒ", "åºƒå³¶çœŒ", "å±±å£çœŒ",
            "å¾³å³¶çœŒ", "é¦™å·çœŒ", "æ„›åª›çœŒ", "é«˜çŸ¥çœŒ", "ç¦å²¡çœŒ", "ä½è³€çœŒ", "é•·å´çœŒ",
            "ç†Šæœ¬çœŒ", "å¤§åˆ†çœŒ", "å®®å´çœŒ", "é¹¿å…å³¶çœŒ", "æ²–ç¸„çœŒ"
        ];
        return prefs[code];
    }

    // å®Ÿè¡Œ
    initMap();

</script>
</body>
</html>